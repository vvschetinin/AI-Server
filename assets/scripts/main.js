(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function e(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(n){if(n.ep)return;n.ep=!0;const i=e(n);fetch(n.href,i)}})();class I{inputElements;maskTemplate="+7 (___) ___-__-__";constructor(){this.inputElements=document.querySelectorAll("input[data-phone-pattern]"),this.init()}getDigits(t){return t.replace(/\D/g,"")}init(){this.inputElements.forEach(t=>{const e=t.placeholder;t.addEventListener("focus",()=>{t.placeholder="",t.value||(t.value=this.maskTemplate);const s=this.getCursorPosition(this.getDigits(t.value).slice(1));setTimeout(()=>{t.setSelectionRange(s,s)},0)}),t.addEventListener("blur",()=>{t.value===this.maskTemplate&&(t.value=""),t.placeholder=e}),t.addEventListener("input",s=>{const i=s.target;let r=this.getDigits(i.value);r.startsWith("7")&&(r=r.slice(1)),r=r.slice(0,10);const d=this.applyMask(r);i.value=d;const c=this.getCursorPosition(r);i.setSelectionRange(c,c)}),t.addEventListener("click",s=>{const n=s.target,i=this.getCursorPosition(this.getDigits(n.value).slice(1));setTimeout(()=>{n.setSelectionRange(i,i)},0)}),t.addEventListener("keydown",s=>{if(s.key==="Backspace"){const n=s.target;if(this.getDigits(n.value).slice(1).length===1){s.preventDefault(),n.value=this.maskTemplate;const r=this.getCursorPosition("");n.setSelectionRange(r,r);return}}(s.key==="ArrowLeft"||s.key==="ArrowRight"||s.key==="ArrowUp"||s.key==="ArrowDown")&&s.preventDefault()})})}applyMask(t){let e=this.maskTemplate;const s=t.split("");for(const n of s)e=e.replace("_",n);return e}getCursorPosition(t){const e=t.length;return e===0?4:e<=3?4+e:e<=6?9+(e-3):e<=8?13+(e-6):e<=10?16+(e-8):18}}document.addEventListener("DOMContentLoaded",()=>{new I});class T{options;elements;currentIndex=0;totalSlides;paginationBullets=[];autoplayInterval=null;isTransitioning=!1;touchStartX=0;touchEndX=0;constructor(t,e={}){this.options={autoplay:!1,autoplaySpeed:4e3,loop:!0,effect:"fade",...e};const s=document.querySelector(t);if(!s)throw new Error(`Slider container with selector "${t}" not found`);const n=s.querySelector(".myslider-wrapper"),i=Array.from(s.querySelectorAll(".slider-item")),r=s.querySelector(".slider-button-prev"),d=s.querySelector(".slider-button-next"),c=s.querySelector(".slider-pagination");if(!n||i.length===0||!r||!d||!c)throw new Error("Required slider elements are missing");this.elements={container:s,wrapper:n,slides:i,prevButton:r,nextButton:d,pagination:c},this.totalSlides=i.length,this.totalSlides<2&&(this.options.autoplay=!1,this.options.loop=!1),this.init()}init(){this.equalizeServiceItemHeights(),this.updateSlide(),this.initPagination(),this.setupEventListeners(),this.setupTouchEvents(),this.setupAutoplay()}equalizeServiceItemHeights(){const t=this.elements.slides.map(s=>s.querySelector(".service-item"));if(t.length===0)return;const e=()=>{if(window.innerWidth>768){t.forEach(n=>n.style.height="auto");const s=Math.max(...t.map(n=>n.offsetHeight));t.forEach(n=>n.style.height=`${s}px`)}else t.forEach(s=>s.style.height="auto")};e(),window.addEventListener("resize",e)}setupEventListeners(){this.elements.prevButton.addEventListener("click",()=>this.prev()),this.elements.nextButton.addEventListener("click",()=>this.next()),this.elements.wrapper.addEventListener("transitionend",()=>{this.isTransitioning=!1})}setupTouchEvents(){const t=this.elements.container;t.addEventListener("touchstart",e=>{this.touchStartX=e.touches[0].clientX}),t.addEventListener("touchmove",e=>{this.touchEndX=e.touches[0].clientX}),t.addEventListener("touchend",()=>{const e=this.touchEndX-this.touchStartX;Math.abs(e)>50&&(e>0?this.prev():this.next()),this.touchStartX=0,this.touchEndX=0})}initPagination(){this.elements.pagination.innerHTML="",!(this.totalSlides<2)&&(this.elements.slides.forEach((t,e)=>{const s=document.createElement("div");s.classList.add("pagination-bullet"),s.dataset.index=e.toString(),s.addEventListener("click",()=>this.goToSlide(e)),this.elements.pagination.appendChild(s),this.paginationBullets.push(s)}),this.updatePagination())}updateSlide(){this.isTransitioning||(this.isTransitioning=!0,this.elements.slides.forEach((t,e)=>{t.classList.remove("active"),t.style.opacity=e===this.currentIndex?"1":"0"}),this.elements.slides[this.currentIndex].classList.add("active"),this.updatePagination())}updatePagination(){this.totalSlides<2||this.paginationBullets.forEach((t,e)=>{t.classList.toggle("active",e===this.currentIndex)})}setupAutoplay(){this.options.autoplay&&this.totalSlides>1&&(this.startAutoplay(),this.elements.container.addEventListener("mouseenter",()=>this.stopAutoplay()),this.elements.container.addEventListener("mouseleave",()=>this.startAutoplay()),this.elements.prevButton.addEventListener("click",()=>this.stopAutoplay()),this.elements.nextButton.addEventListener("click",()=>this.stopAutoplay()),this.paginationBullets.forEach(t=>t.addEventListener("click",()=>this.stopAutoplay())))}startAutoplay(){this.autoplayInterval||this.totalSlides<2||(this.autoplayInterval=window.setInterval(()=>{this.next()},this.options.autoplaySpeed))}stopAutoplay(){this.autoplayInterval&&(clearInterval(this.autoplayInterval),this.autoplayInterval=null)}prev(){this.isTransitioning||this.totalSlides<2||(this.currentIndex=this.options.loop?(this.currentIndex-1+this.totalSlides)%this.totalSlides:Math.max(this.currentIndex-1,0),this.updateSlide())}next(){this.isTransitioning||this.totalSlides<2||(this.currentIndex=this.options.loop?(this.currentIndex+1)%this.totalSlides:Math.min(this.currentIndex+1,this.totalSlides-1),this.updateSlide())}goToSlide(t){this.isTransitioning||this.totalSlides<2||(this.currentIndex=this.options.loop?t%this.totalSlides:Math.max(0,Math.min(t,this.totalSlides-1)),this.updateSlide())}destroy(){this.stopAutoplay(),this.elements.prevButton.removeEventListener("click",()=>this.prev()),this.elements.nextButton.removeEventListener("click",()=>this.next()),this.elements.container.removeEventListener("mouseenter",()=>this.stopAutoplay()),this.elements.container.removeEventListener("mouseleave",()=>this.startAutoplay()),this.elements.container.removeEventListener("touchstart",e=>{this.touchStartX=e.touches[0].clientX}),this.elements.container.removeEventListener("touchmove",e=>{this.touchEndX=e.touches[0].clientX}),this.elements.container.removeEventListener("touchend",()=>{const e=this.touchEndX-this.touchStartX;Math.abs(e)>50&&(e>0?this.prev():this.next()),this.touchStartX=0,this.touchEndX=0}),this.paginationBullets.forEach(e=>e.removeEventListener("click",()=>this.goToSlide(parseInt(e.dataset.index)))),this.elements.wrapper.removeEventListener("transitionend",()=>{this.isTransitioning=!1}),this.elements.slides.map(e=>e.querySelector(".service-item")).forEach(e=>e.style.height="")}}document.addEventListener("DOMContentLoaded",()=>{document.querySelector(".myslider")&&new T(".myslider",{autoplay:!0,autoplaySpeed:4e3,loop:!0,effect:"fade"})});class f{bannerElement;acceptButton;options;static defaultOptions={consentCookieName:"user_cookie_consent",cookieDurationDays:365,hiddenClass:"is-hidden"};constructor(t){this.options={...f.defaultOptions,...t};const e=document.getElementById(this.options.bannerId),s=document.getElementById(this.options.buttonId);if(!e||!s)throw new Error("Cookie banner elements not found in the DOM.");this.bannerElement=e,this.acceptButton=s}init(){this.getCookie(this.options.consentCookieName)||this.showBanner(),this.acceptButton.addEventListener("click",()=>this.acceptCookies())}showBanner(){this.bannerElement.classList.remove(this.options.hiddenClass)}hideBanner(){this.bannerElement.classList.add(this.options.hiddenClass)}acceptCookies(){this.setCookie(this.options.consentCookieName,"true",this.options.cookieDurationDays),this.hideBanner()}setCookie(t,e,s){let n="";if(s){const i=new Date;i.setTime(i.getTime()+s*24*60*60*1e3),n="; expires="+i.toUTCString()}document.cookie=`${t}=${e||""}${n}; path=/`}getCookie(t){const e=t+"=",s=document.cookie.split(";");for(let n=0;n<s.length;n++){let i=s[n];for(;i.charAt(0)===" ";)i=i.substring(1,i.length);if(i.indexOf(e)===0)return i.substring(e.length,i.length)}return null}}document.addEventListener("DOMContentLoaded",()=>{const o={bannerId:"cookie-banner",buttonId:"cookie-accept-btn"};try{new f(o).init()}catch(t){console.error("Failed to initialize cookie banner:",t)}});const u=document.querySelector("#modal-form"),v=document.querySelector(".start-project-overlay");u&&v&&u.addEventListener("submit",async function(o){o.preventDefault();const t=new FormData(u);try{const e=await fetch("/sendform.php",{method:"POST",body:t});if(!e.ok)throw new Error(`Ошибка сети: ${e.status} ${e.statusText}`);const s=await e.text();u.reset();const n=document.querySelector(".success span"),i=document.querySelector(".success");n&&i&&(n.innerHTML=s,i.classList.add("success-mail"),i.style.display="flex",setTimeout(()=>{i.classList.remove("success-mail"),i.style.display="none",setTimeout(()=>{v.classList.remove("is-active")},1e3)},4e3))}catch(e){console.error("Ошибка отправки формы:",e),alert(`Ошибка отправки формы: ${e instanceof Error?e.message:"Неизвестная ошибка"}`)}});(function(){document.addEventListener("DOMContentLoaded",()=>{const o=document.querySelectorAll(".js-startproject"),t=document.querySelector(".h1-inner"),e=document.querySelector('input[name="subject"]');if(o.length===0||!t||!e){console.warn("FormUpdater: Не удалось найти все необходимые элементы");return}const s=n=>{const r=n.currentTarget.textContent?.trim();r&&(t.textContent=r,e.value=r)};o.forEach(n=>{n.addEventListener("click",s)})})})();const b=40,a=document.querySelector(".header"),w=()=>window.pageYOffset||document.documentElement.scrollTop,A=()=>{a&&(w()<=b?a.classList.remove("is-active"):a.classList.add("is-active"))};document.addEventListener("DOMContentLoaded",A);window.addEventListener("scroll",()=>{a&&(w()>b?a.classList.add("is-active"):a.classList.remove("is-active"))});const g=document.querySelectorAll(".hero-video");if(g.length>0){const o=()=>{const t=window.innerWidth<=550;g.forEach(e=>{e&&(t?e.pause():e.play().catch(s=>{console.error("Автовоспроизведение заблокировано:",s.message)}))})};o(),window.addEventListener("resize",o)}const p=document.querySelector(".start-project-overlay"),q=document.querySelectorAll(".js-startproject"),C=document.querySelector(".js-closebutton");p&&(q.forEach(o=>{o.addEventListener("click",()=>{p.classList.add("is-active")})}),C?.addEventListener("click",()=>{p.classList.remove("is-active")}));const y=document.querySelector("body"),E=document.querySelector(".nav-toggle");y&&E&&E.addEventListener("click",()=>{y.classList.toggle("menu-open")});const h=document.querySelector('[name="formbutton"]'),m=document.querySelector('[name="formcheck"]');h&&m?(h.setAttribute("disabled","true"),m.oninput=()=>{m.checked?h.removeAttribute("disabled"):h.setAttribute("disabled","true")}):console.error("Один из элементов формы не найден");document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".faq-question").forEach(t=>{t.addEventListener("click",()=>{const e=t.nextElementSibling;t.classList.contains("active")?(t.classList.remove("active"),e&&(e.classList.remove("active"),e.style.maxHeight="0")):(t.classList.add("active"),e&&(e.classList.add("active"),e.style.maxHeight=`${e.scrollHeight+10}px`))}),t.addEventListener("keydown",e=>{(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),t.click())})})});const D=o=>{o.forEach(t=>{t.target&&t.isIntersecting&&(t.target.classList.add("element-show"),l.unobserve(t.target))})};let l;function k(){l&&l.disconnect();const t={rootMargin:window.innerWidth<800?"0px 0px -25px 0px":"0px 0px -40px 0px",threshold:0};l=new IntersectionObserver(D,t),document.querySelectorAll(".element-animation-up").forEach(s=>{l.observe(s)})}k();window.addEventListener("resize",k);function B(o,t){let e=null;return(...s)=>{e&&clearTimeout(e),e=setTimeout(()=>{o(...s)},t)}}function L(){const o=document.querySelectorAll(".service-item");if(!o.length)return;let t=0;o.forEach(e=>{e.style.position="absolute",e.style.visibility="hidden",e.style.display="block",e.style.height="",e.style.minHeight=""}),o.forEach(e=>{const s=e.scrollHeight;s>t&&(t=s)}),o.forEach(e=>{e.style.position="",e.style.visibility="",e.style.display="",e.style.minHeight=`${t}px`})}document.addEventListener("DOMContentLoaded",()=>{L(),window.addEventListener("resize",B(L,100))});const S=document.querySelector(".footer-copyright");if(S){const o=S.querySelector("span");if(o){const s=`2019–${new Date().getFullYear()}`;o.textContent=s}}function x(o){const t=document.getElementById(o.containerId);if(!t)return;const e=document.createElement("video");e.classList.add("hero-video","bg--cover"),e.setAttribute("preload",o.preload??"metadata"),e.setAttribute("poster",o.posterUrl),e.loop=!0,e.muted=!0,e.playsInline=!0,e.autoplay=!0,e.controls=o.controls??!1;const s=document.createElement("source");s.src=o.videoUrl,s.type="video/mp4",e.appendChild(s),t.appendChild(e),e.load(),e.play().catch(n=>{console.warn("Автовоспроизведение заблокировано браузером.",n)})}document.getElementById("hero-figure")&&x({containerId:"hero-figure",videoUrl:"/assets/video/careers.mp4",posterUrl:"/assets/images/hero/main-hero.webp",preload:"metadata"});document.getElementById("hero-figure-contact")&&x({containerId:"hero-figure-contact",videoUrl:"/assets/video/contacts/contact.mp4",posterUrl:"/assets/images/contacts/bg-contacts.webp",preload:"auto",controls:!0});
